# これは何？

minidns は Socket モジュールの開発のためのデモアプリとして作成した簡易 DNS
サーバです。

LAN 内のクライアントから受け取った DNS クエリを ISP の DNS サーバに投げ直す
DNS 転送機能と、特定のドメインへの問い合わせに対して mruby のコードで動的に
生成した IP アドレスを返す DNS コンテンツサーバの機能を備えます。

返すコンテンツは、"en0.example.jp" の A レコードとして minidns が動作してい
るホストの "en0" インタフェースのアドレスを、"default.example.com" の A レ
コードとしてデフォルトゲートウェイのアドレスを返すようにしました。この実装に
ついては DNSServer#receive\_query 内で定義している getifa, getdefault 関数を
ご覧ください。

また、minidns を実装したもう一つの目的は、mruby でサーバプログラムを実装した
場合の課題を洗い出すことでした。実装してみた所感として、用途を特化したサーバ
ならば十分使えるものが作れる、と感じました。

なお minidns は CRuby ではそのままでは動きません。mruby の Socket モジュール
を作成するにあたって、non-blocking IO 関連の API を CRuby と非互換にしたため
です。この点は将来的に修正する予定です。
